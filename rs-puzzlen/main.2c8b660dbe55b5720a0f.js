(()=>{"use strict";var t={625:(t,e,s)=>{s.d(e,{A:()=>o});var i=s(601),n=s.n(i),r=s(314),a=s.n(r)()(n());a.push([t.id,"",""]);const o=a},508:(t,e,s)=>{s.d(e,{A:()=>o});var i=s(601),n=s.n(i),r=s(314),a=s.n(r)()(n());a.push([t.id,".game-container{display:flex;justify-content:center;align-items:center;height:100%;width:100%;transition:opacity 0.2s ease}.hidden{opacity:0;pointer-events:none}\n",""]);const o=a},232:(t,e,s)=>{s.d(e,{A:()=>o});var i=s(601),n=s.n(i),r=s(314),a=s.n(r)()(n());a.push([t.id,'.form-wrapper{display:flex;justify-content:center;margin:0 auto;padding:5rem 5rem;max-width:24rem;width:100%;border-radius:1rem;background-color:var(--transparent-bg);transition:opacity 0.2s ease}.hidden{opacity:0;pointer-events:none}.first-name,.last-name{position:relative;display:flex}.login-form{display:flex;flex-direction:column;gap:1.5rem;width:100%}.login-form input{font-size:2.4rem;font-family:"Stylish", serif;margin-bottom:1.2rem;padding:0.8rem;border:2px solid #ccc;border-radius:0.7rem;outline:none;transition:border-color 0.3s ease-in-out;width:100%}.login-form input.invalid{border-color:red}.login-form input:focus{border-color:#007bff}.login-form .error-messages{position:absolute;bottom:-1rem;left:.5rem;font-size:1.6rem;font-family:"Stylish", serif;color:red}.login-form button{padding:1rem;background-color:var(--button-bg-color);color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:2.4rem;font-family:"Stylish", serif;transition:background-color 0.3s ease-in-out}.login-form button:hover{background-color:var(--button-hover-bg-color)}.login-form button:disabled{background-color:#ccc;cursor:not-allowed}\n',""]);const o=a},74:(t,e,s)=>{s.d(e,{A:()=>o});var i=s(601),n=s.n(i),r=s(314),a=s.n(r)()(n());a.push([t.id,'.start-screen{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;padding:0 3rem;height:100%;width:100%;max-width:1000px;transition:opacity 0.2s ease}.header{width:100%;height:100px;display:flex;justify-content:space-between;align-items:center;padding:0 20px;color:#fff;font-size:1.6rem;font-family:"Stylish", serif}.game-wrapper{display:flex;justify-content:center;align-items:center;flex:1;width:100%}.start-game-button,.logout-button{padding:1.2rem 3.2rem;background-color:var(--button-bg-color);color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:1.8rem;font-family:"Stylish", serif;transition:background-color 0.3s ease-in-out}.start-game-button:hover,.logout-button:hover{background-color:var(--button-hover-bg-color)}.user-name{font-size:2.4rem;font-family:"Stylish", serif}.hidden{opacity:0;pointer-events:none}.greeting{display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:var(--transparent-bg);gap:1.6rem;max-width:40rem;font-size:2.4rem;border-radius:1rem;padding:2rem;color:#3d3d3d;transition:opacity 0.2s ease;font-family:"Stylish", serif;font-weight:bold}.greeting p{text-align:center}\n',""]);const o=a},353:(t,e,s)=>{s.d(e,{A:()=>u});var i=s(601),n=s.n(i),r=s(314),a=s.n(r),o=s(417),l=s.n(o),c=new URL(s(965),s.b),h=a()(n()),d=l()(c);h.push([t.id,`:root{--button-bg-color: #9d596b;--button-hover-bg-color: #7e3843;--transparent-bg: rgba(205, 214, 219, 0.5)}*{margin:0;padding:0}html{font-size:10px}body{background:url(${d}) no-repeat center fixed;background-size:cover;display:flex;justify-content:center;align-items:center;height:100vh;padding:0 5px;overflow:hidden}\n`,""]);const u=h},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var s="",i=void 0!==e[5];return e[4]&&(s+="@supports (".concat(e[4],") {")),e[2]&&(s+="@media ".concat(e[2]," {")),i&&(s+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),s+=t(e),i&&(s+="}"),e[2]&&(s+="}"),e[4]&&(s+="}"),s})).join("")},e.i=function(t,s,i,n,r){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(i)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(a[l]=!0)}for(var c=0;c<t.length;c++){var h=[].concat(t[c]);i&&a[h[0]]||(void 0!==r&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=r),s&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=s):h[2]=s),n&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=n):h[4]="".concat(n)),e.push(h))}},e}},417:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},601:t=>{t.exports=function(t){return t[1]}},72:t=>{var e=[];function s(t){for(var s=-1,i=0;i<e.length;i++)if(e[i].identifier===t){s=i;break}return s}function i(t,i){for(var r={},a=[],o=0;o<t.length;o++){var l=t[o],c=i.base?l[0]+i.base:l[0],h=r[c]||0,d="".concat(c," ").concat(h);r[c]=h+1;var u=s(d),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)e[u].references++,e[u].updater(m);else{var p=n(m,i);i.byIndex=o,e.splice(o,0,{identifier:d,updater:p,references:1})}a.push(d)}return a}function n(t,e){var s=e.domAPI(e);return s.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;s.update(t=e)}else s.remove()}}t.exports=function(t,n){var r=i(t=t||[],n=n||{});return function(t){t=t||[];for(var a=0;a<r.length;a++){var o=s(r[a]);e[o].references--}for(var l=i(t,n),c=0;c<r.length;c++){var h=s(r[c]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}r=l}}},659:t=>{var e={};t.exports=function(t,s){var i=function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(t){s=null}e[t]=s}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(s)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,s)=>{t.exports=function(t){var e=s.nc;e&&t.setAttribute("nonce",e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(s){!function(t,e,s){var i="";s.supports&&(i+="@supports (".concat(s.supports,") {")),s.media&&(i+="@media ".concat(s.media," {"));var n=void 0!==s.layer;n&&(i+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),i+=s.css,n&&(i+="}"),s.media&&(i+="}"),s.supports&&(i+="}");var r=s.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,s)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},965:(t,e,s)=>{t.exports=s.p+"assets/276f23b84137a0b964b1.png"}},e={};function s(i){var n=e[i];if(void 0!==n)return n.exports;var r=e[i]={id:i,exports:{}};return t[i](r,r.exports,s),r.exports}s.m=t,s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;s.g.importScripts&&(t=s.g.location+"");var e=s.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length)for(var n=i.length-1;n>-1&&(!t||!/^http(s?):/.test(t));)t=i[n--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=t})(),s.b=document.baseURI||self.location.href,s.nc=void 0,(()=>{var t=s(72),e=s.n(t),i=s(825),n=s.n(i),r=s(659),a=s.n(r),o=s(56),l=s.n(o),c=s(540),h=s.n(c),d=s(113),u=s.n(d),m=s(353),p={};p.styleTagTransform=u(),p.setAttributes=l(),p.insert=a().bind(null,"head"),p.domAPI=n(),p.insertStyleElement=h(),e()(m.A,p),m.A&&m.A.locals&&m.A.locals;var f=s(625),g={};g.styleTagTransform=u(),g.setAttributes=l(),g.insert=a().bind(null,"head"),g.domAPI=n(),g.insertStyleElement=h(),e()(f.A,g),f.A&&f.A.locals&&f.A.locals;const v="userData-dewlar";class x{static subscribe(t,e){x.events[t]||(x.events[t]=[]),x.events[t].push(e)}static publish(t,...e){const s=x.events[t];s&&s.forEach((t=>{t(...e)}))}}x.events={};const y=x;var b=s(74),w={};function z(t,e){const s=document.createElement(t);return e&&(e.classList&&s.classList.add(...e.classList),e.attrList&&Object.keys(e.attrList).length&&Object.keys(e.attrList).forEach((t=>{s.setAttribute(t,e.attrList[t])})),e.textContent&&(s.textContent=e.textContent),e.childNodeList&&s.append(...e.childNodeList)),s}w.styleTagTransform=u(),w.setAttributes=l(),w.insert=a().bind(null,"head"),w.domAPI=n(),w.insertStyleElement=h(),e()(b.A,w),b.A&&b.A.locals&&b.A.locals;class L{constructor(){this.wrapper=z("div",{classList:["start-screen","hidden"]}),this.header=z("div",{classList:["header"]}),this.gameWrapper=z("div",{classList:["game-wrapper"]}),this.localStorageData=localStorage.getItem(v),this.createHeaderContent(),setTimeout((()=>{this.wrapper.classList.remove("hidden")}),200)}createStartScreen(){return this.gameWrapper.append(this.createGreetingScreen()),this.wrapper.append(this.header,this.gameWrapper),this.wrapper}createGreetingScreen(){const t=z("div",{classList:["greeting"]}),e=this.getUserData();if(!e)throw new Error("No user data found in greeting");{const{firstName:s,lastName:i}=e,n=z("p",{classList:["welcome"],textContent:`Welcome, ${s} ${i}`}),r=z("p",{textContent:"RSS-Puzzle"}),a=z("p",{textContent:"RSS Puzzle is an interactive mini game aimed at enhancing English language skills. The game integrates various levels of difficulty, hint options and a unique puzzle-like experience with artwork"}),o=z("button",{classList:["start-game-button"],textContent:"Start game"});o.addEventListener("click",(()=>{console.log("Start game"),t.classList.add("hidden"),setTimeout((()=>{t.remove(),y.publish("startGame",this.gameWrapper)}),200)})),t.append(n,r,a,o)}return t}getUserData(){return this.localStorageData?JSON.parse(this.localStorageData):null}createHeaderContent(){const t=this.getUserData(),e=z("h1",{classList:["title"],textContent:"RSS-PUZZLE"}),s=z("div",{classList:["user-name"]});t&&t.firstName&&t.lastName&&(s.textContent=`${t.firstName} ${t.lastName}`);const i=z("button",{classList:["logout-button"],textContent:"Logout"});i.addEventListener("click",(()=>{localStorage.removeItem(v),this.wrapper.classList.add("hidden"),setTimeout((()=>{this.wrapper.remove(),y.publish("logout")}),200)})),this.header.append(e,s,i)}}var E=s(232),S={};S.styleTagTransform=u(),S.setAttributes=l(),S.insert=a().bind(null,"head"),S.domAPI=n(),S.insertStyleElement=h(),e()(E.A,S),E.A&&E.A.locals&&E.A.locals;class N{constructor(){this.firstNameInput=z("input",{classList:["first-name-input"],attrList:{type:"text",placeholder:"First Name",maxlength:"15"}}),this.lastNameInput=z("input",{classList:["last-name-input"],attrList:{type:"text",placeholder:"Last Name",maxlength:"15"}}),this.loginButton=z("button",{classList:["Login"],attrList:{type:"button",disabled:"true"},textContent:"Login"}),this.formWrapper=z("div",{classList:["form-wrapper","hidden"]}),this.firstNameErrorMessage=z("div",{classList:["error-messages","first-error"]}),this.lastNameErrorMessage=z("div",{classList:["error-messages","first-error"]})}createLoginForm(){const t=z("div",{classList:["first-name"],childNodeList:[this.firstNameInput,this.firstNameErrorMessage]}),e=z("div",{classList:["last-name"],childNodeList:[this.lastNameInput,this.lastNameErrorMessage]}),s=z("form",{classList:["login-form"],childNodeList:[t,e,this.loginButton]});return this.formWrapper.append(s),this.addEventListeners(),setTimeout((()=>{this.formWrapper.classList.remove("hidden")}),200),this.formWrapper}addEventListeners(){this.firstNameInput.addEventListener("input",(()=>this.validateForm(this.firstNameInput))),this.lastNameInput.addEventListener("input",(()=>this.validateForm(this.lastNameInput))),this.loginButton.addEventListener("click",this.handleLogin.bind(this))}validateForm(t){const[e,s]=this.validateName(t);t.classList.contains("first-name-input")&&(this.firstNameInput.classList.toggle("invalid",!e),this.firstNameErrorMessage.textContent=e?"":s),t.classList.contains("last-name-input")&&(this.lastNameInput.classList.toggle("invalid",!e),this.lastNameErrorMessage.textContent=e?"":s),this.loginButton.disabled=this.firstNameInput.classList.contains("invalid")||this.lastNameInput.classList.contains("invalid")||0===this.firstNameInput.value.length||0===this.lastNameInput.value.length}validateName(t){const e=t.value.trim();if(0===t.value.length)return[!1,"The field is required"];if(!/^[A-Z]/.test(t.value))return[!1,"First letter capitalize required"];if(/^[A-Z]{2,}/.test(t.value))return[!1,"One letter capitalized"];if(!/^[A-Z][a-z]*(?:-[a-z]*)?$/.test(t.value))return[!1,"English letters or a hyphen"];if(t.classList.contains("first-name-input")){if(e.length<3)return[!1,"Minimum 3 symbols required"]}else if(e.length<4)return[!1,"Minimum 4 symbols required"];return/^[A-Z].*[a-z]$/.test(t.value)?[!0,""]:[!1,"First and last letters required"]}handleLogin(t){t.preventDefault();const e={firstName:this.firstNameInput.value.trim(),lastName:this.lastNameInput.value.trim()};localStorage.setItem(v,JSON.stringify(e)),this.formWrapper.classList.add("hidden"),setTimeout((()=>{this.formWrapper.remove(),y.publish("login")}),200)}}var A=s(508),C={};C.styleTagTransform=u(),C.setAttributes=l(),C.insert=a().bind(null,"head"),C.domAPI=n(),C.insertStyleElement=h(),e()(A.A,C),A.A&&A.A.locals&&A.A.locals;class T{constructor(t,e,s,i,n){this.offset=null,this.x=t,this.y=e,this.size=i.size,this.left=i.left,this.right=i.right,this.imagePart=i.imagePart,this.selected=!1,this.active=!1,this.scale=i.scale,this.word=i.word,this.initialX=t,this.initialY=e,this.canvas=s,this.image=n}draw(t){const e=15;if(t.save(),t.beginPath(),t.moveTo(this.x,this.y),t.lineTo(this.x+this.size.w,this.y),t.lineTo(this.x+this.size.w,this.y+this.size.h/2-this.size.h/5),this.right){const s={x:this.x+this.size.w+e,y:this.y+(this.size.h/2-this.size.h/3)},i={x:this.x+this.size.w+e,y:this.y+(this.size.h/2+this.size.h/3)},n={x:this.x+this.size.w,y:this.y+(this.size.h/2+this.size.h/5)};t.bezierCurveTo(s.x,s.y,i.x,i.y,n.x,n.y)}if(t.lineTo(this.x+this.size.w,this.y+this.size.h),t.lineTo(this.x,this.y+this.size.h),this.left){t.lineTo(this.x,this.y+this.size.h/2+this.size.h/5);const s={x:this.x+e,y:this.y+(this.size.h/2+this.size.h/3)},i={x:this.x+e,y:this.y+(this.size.h/2-this.size.h/3)},n={x:this.x,y:this.y+(this.size.h/2-this.size.h/5)};t.bezierCurveTo(s.x,s.y,i.x,i.y,n.x,n.y)}t.lineTo(this.x,this.y),t.stroke(),t.clip(),t.drawImage(this.image,(this.imagePart.x-(this.canvas.width-this.image.width*this.scale)/2)/this.scale,this.imagePart.y/this.scale,(this.size.w+e)/this.scale,this.size.h/this.scale,this.x,this.y,this.size.w+e,this.size.h);const s=t.measureText(this.word).width,i=this.left?this.x+(this.size.w-s)/2+7.5:this.x+(this.size.w-s)/2;t.fillText(this.word,i,this.y+this.size.h/2),t.closePath(),t.restore()}activate(){this.active=!this.active}}class I{constructor(t,e,s){if(this.width=e,this.height=s,this.selectedElement=null,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),null===this.ctx)throw new Error("Unable to get 2D rendering context.");this.canvas.width=e,this.canvas.height=s,this.ctx.lineWidth=1,this.image=new Image,this.image.src="./assets/images/start-screen.png",this.scale=0,this.puzzle=[],this.image.addEventListener("load",(()=>{const e=this.canvas.width/this.image.width,s=500/this.image.height;this.scale=Math.max(e,s);let i=0;t.forEach((t=>{const e=t.textExample.split(/\s+/gm),s=e.length,n=e.join("").length+6*s;let r=0;const a=this.image.height*this.scale/10;for(let t=0;t<s;t+=1){const s=this.canvas.width/n*(e[t].length+6);this.puzzle.push(new T(r,i,this.canvas,{size:{w:s,h:a},imagePart:{x:r,y:i},left:0!==t,right:t<e.length-1,scale:this.scale,word:e[t]},this.image)),r+=s}i+=a})),this.setupCanvas(),this.initListeners(),this.animate()}))}getCanvas(){return this.canvas}initListeners(){this.canvas.addEventListener("mousedown",(t=>this.onMouseDown(t))),this.canvas.addEventListener("mousemove",(t=>this.onMouseMove(t))),this.canvas.addEventListener("mouseup",(()=>this.onMouseUp()))}setupCanvas(){this.canvas.style.backgroundColor="var(--transparent-bg)",this.ctx.textBaseline="middle",this.ctx.font="18px Stylish",this.ctx.fillStyle="white"}onMouseDown(t){const e=this.getMouseCoords(t),s=this.puzzle.filter((t=>this.cursorInRect(e.x,e.y,t.x,t.y,t.size.w,t.size.h)));if(s.length>0){const t=s.at(-1);if(void 0===t)throw new Error("Element under mouse is undefined");t.selected=!0,t.offset=this.getOffsetCoords(e,t),this.selectedElement=t}else this.puzzle.forEach((t=>{t.selected=!1}))}onMouseMove(t){const e=this.getMouseCoords(t);this.puzzle.map((t=>this.cursorInRect(e.x,e.y,t.x,t.y,t.size.w,t.size.h))).every((t=>!t))?this.canvas.classList.remove("pointer"):this.canvas.classList.add("pointer"),this.puzzle.forEach((t=>{const s=t;if(s.selected){if(null===s.offset)throw new Error("puzzleItem.offset is null");s.x=e.x-s.offset.x,s.y=e.y-s.offset.y}this.cursorInRect(e.x,e.y,s.x,s.y,s.size.w,s.size.h)?s.active||s.activate():s.active=!1}))}onMouseUp(){this.puzzle.forEach((t=>{t.selected&&(this.animatePuzzleReturnToOriginalPosition(t,t.initialX,t.initialY),t.selected=!1)}))}animate(){this.ctx.clearRect(0,0,this.canvas.width,this.ctx.canvas.height),this.puzzle.forEach((t=>{t!==this.selectedElement&&t.draw(this.ctx)})),this.selectedElement&&this.selectedElement.draw(this.ctx),window.requestAnimationFrame((()=>this.animate()))}getMouseCoords(t){const e=this.canvas.getBoundingClientRect();return{x:t.pageX-e.left,y:t.pageY-e.top}}getOffsetCoords(t,e){return{x:t.x-e.x,y:t.y-e.y}}cursorInRect(t,e,s,i,n,r){return t>s&&t<s+n&&e>i&&e<i+r}animatePuzzleReturnToOriginalPosition(t,e,s){const i=t,n=Math.sqrt((i.x-e)**2+(i.y-s)**2)/this.canvas.width*300,r=1e3/60,a=(e-i.x)/(n/r),o=(s-i.y)/(n/r);let l=0;const c=setInterval((()=>{l>=n?(clearInterval(c),i.x=e,i.y=s):(i.x+=a,i.y+=o,l+=r)}),r)}}class M{constructor(){this.gameContainer=z("div",{classList:["game-container","hidden"]}),setTimeout((()=>{this.gameContainer.classList.remove("hidden")}),200)}createGameContainer(){const t=new I([{textExample:"We need to study because we have a test tomorrow"},{textExample:"My friend drives an expensive sports car"},{textExample:"She gave pink flowers to her grandmother"},{textExample:"We need to study because we have a test tomorrow"},{textExample:"My friend drives an expensive sports car"},{textExample:"She pink flowers to her bb"},{textExample:"We need to aa because we have a test tomorrow"},{textExample:"My friend drives an expensive sports car"},{textExample:"She gave pink flowers to her grandmother"},{textExample:"She gave pink   to her grandmother"}],700,620);return this.gameContainer.append(t.getCanvas()),this.gameContainer}}class k{static initialize(){y.subscribe("login",(()=>{this.login()})),y.subscribe("logout",(()=>{this.logout()})),y.subscribe("startGame",(t=>{this.startGame(t)}))}static login(){const t=new L;document.body.innerHTML="",document.body.append(t.createStartScreen())}static logout(){localStorage.removeItem(v);const t=new N;document.body.innerHTML="",document.body.append(t.createLoginForm())}static startGame(t){const e=t,s=new M;e.append(s.createGameContainer())}}const P=class{start(){k.initialize(),null!==localStorage.getItem(v)?k.login():k.logout()}};window.onload=()=>{console.log("Project started"),(new P).start()}})()})();